<p id="notice"><%= notice %></p>

<p>
  <strong>Name:</strong>
  <%= @report.name %>
</p>

<p>
  <strong>Query:</strong>
  <pre>
    <%= @report.query %>
  </pre>
</p>

<% if @renderer.query_successful? %>
  <table>
    <thead>
      <tr>
        <% @renderer.headers.each do |header| %>
          <th><%= header %></th>
        <% end %>
      </tr>
    </thead>

    <tbody>
      <% @renderer.rows.each do |row| %>
        <tr>
          <% row.each do |value| %>
            <td><%= value %></td>
          <% end %>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p class="danger">
    Failed to execute query with error:
    <code>
      <%= @renderer.query_error %>
    </code>
  </p>
<% end %>

<%= link_to 'Edit', edit_report_path(@report) %> |
<%= link_to 'Back', root_path %>
